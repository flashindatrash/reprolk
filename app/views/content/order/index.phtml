<div class="panel panel-default">
	<div class="panel-heading"><?php print sprintf(View::str('all_orders_result'), count($this->orders)); ?>
		<div class="pull-right">
			<?php print View::link('#', '<span class="glyphicon glyphicon-filter" aria-hidden="true"></span> ' . View::str('filter'), null, 'filter', 'btn btn-xs btn-primary', View::str('filter'), null, array('toggle' => 'modal', 'target' => '#filterModal')); ?>
			<?php print View::link(Route::ORDER_ADD, '<span class="glyphicon glyphicon-plus" aria-hidden="true"></span> ' . View::str('add'), null, 'add', 'btn btn-xs btn-primary', null, 'top'); ?>
			<?php print View::link(Route::ORDER_ADD_TEMPLATE, '<span class="glyphicon glyphicon-share-alt" aria-hidden="true"></span> ' . View::str('preset'), null, 'add', 'btn btn-xs btn-primary', null, 'top'); ?>
			<?php print View::link(Route::ORDER_VIEW, '<span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span> ' . View::str('view'), null, 'view', 'btn-action btn btn-xs btn-primary disabled', null, 'top'); ?>
			<?php print View::link(Route::ORDER_EDIT, '<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> ' . View::str('edit'), null, 'edit', 'btn-action btn btn-xs btn-primary disabled', null, 'top'); ?>
			<?php print View::link(Route::ORDER_DUPLICATE, '<span class="glyphicon glyphicon-duplicate" aria-hidden="true"></span> ' . View::str('duplicate'), null, 'duplicate', 'btn-action btn btn-xs btn-primary disabled', null, 'right'); ?>
		</div>
	</div>
	
	<table class="table table-selected table-hover">
		<thead>
			<tr>
				<?php
				$html = '';
				foreach ($this->fields_view as $th) {
					$html .= '<th>';
					$html .= View::linkSort($th, $this->order_by);
					$html .= '</th>';
				}
				print $html;
				?>
			</tr>
		</thead>
		<tbody>
			<?php
			$orders = '';
			foreach ($this->orders as $n => $order) {
				$classes = array();
				
				$classes[] = 'table_row';
				$classes[] = 'noselect';
				$classes[] = 'cursor_pointer';
				
				if ($order->isCanceled()) {
					$classes[] = 'danger';
				}
				
				$orders .= '<tr class="' . join (' ', $classes) . '" id="' . $order->id . '">';
				foreach ($this->fields_view as $td) {
					$orders .= '<td class="td_' . $td . '">' . $order->$td . '</td>';
				}
			}
			print $orders;
			?>
		</tbody>
	</table>
</div>
